<script id="search-js" defer="" src="https://api.mapbox.com/search-js/v1.0.0-beta.17/web.js"></script>
{{> navbar}}
<h1>Detalles</h1>


<div class="container">
    <div class="box">
        <h3> {{event.name}} </h3>
        <div class="local-i">
            <img src="{{event.image}}" alt="{{event.name}}">
        </div>
        <div>
        
            <p> Address: <strong> {{event.address}} </strong></p>
            <p> Date: <strong> {{event.eventDate}} </strong></p>
            <p> Hour: <strong> {{event.eventTime}} hours </strong></p>
            <p> Price: <strong> {{event.cost}} </strong></p>

        
            
            <h2 class="c-dark-gray font-weight-semi mb-4 mt-4">Location </h2>
            <div class="row">
                <mapbox-address-minimap
                    satellite-toggle="true"
                    can-adjust-marker="true"
                    id="map"
                    location="{{event.location}}"
                >
                </mapbox-address-minimap>
            </div>
            <button type="button" class="btn mt-5 btn-warning"> <a href="/events/{{event.id}}/edit">  Edit </a></button>
        </div>
        <section class="description"> 
            <p> {{event.description}} </p>
        </section>
    </div>
    
</div>







<script>
  const ACCESS_TOKEN = 'pk.eyJ1IjoiY2RlbGF0b3JyZSIsImEiOiJja3Y5bHJ6ZzcweG0yMnZtZzI4eXJna2UxIn0.m-OWQWPhRrb5ZNRz0M9AqQ';
  const minimap = document.querySelector('mapbox-address-minimap')
  const coordinates = minimap.getAttribute('location').split(',');
  const script = document.getElementById('search-js');

  script.onload = () => {
    minimap.accessToken = ACCESS_TOKEN;
   minimap.onSaveMarkerLocation = (coordinate) => { console.log(coordinate); }
    minimap.feature = {
      type: 'Feature',
     geometry: { type: 'Point', coordinates: coordinates },
      properties: {}
    };
  }
</script>